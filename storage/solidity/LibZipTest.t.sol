// SPDX-License-Identifier: MIT
pragma solidity ^0.8.4;

import "forge-std/Test.sol";
import { LibZip } from "../src/libraries/LibZip.sol";  // Adjust path if your src/ is different

contract LibZipTest is Test {
    using LibZip for bytes;  // Optional: Enables `data.flzCompress()` syntax

    function testFlzCompress() public pure {

        bytes memory inputData = hex"0a5370656369616c203173002c00000000000000ffd4d4d4ffffffffffaeaeaeffebebebffc9c9c9ffb9b9b9ff333333ffb7b7b7ff9e9e9eff131313ff373737ffeaeaeaff404040ff595959ffc7c7c7ffadadadff666666ffbebebeff1f1f1fffc8c8c8ff969696ffdbdbdbffdededeff7c7c7cff2c2c2cff3a3a3aff575757ff646464ff868686ffe0e0e0ff4c4c4cff383838ff515151ff454545ffbdbdbdffd6d6d6ff1e1e1eff3f3f3fff353535ff555555ff797979ff818181ff011003900a0a212f000d416e6369656e74204d756d6d7906000e010a000e010800020102100c0d02010600020102100c0d02010400020102040609020d0402040d02010200020102040609020d0402040d0201020002010218020d0202020d0209040204090201020002010218020d0202020d020904020409020102000201020402090a02040d020102000201020402090a02040d0201020002010218060d0a090201020002010218060d0a090201020002010218020204010602060102000201021802020401060208010218020d02020401060208010218020d02020401060208010218040d0e0204010218040d0e020601020402090a0d04090601020402090a0d04090201020002010218020d020204090401040d0201020002010218020d020204090401040d02010200020102180202060d0409020202010400020102180202060d0409020202010400020102100202020d0201020d0201020d0201020202010200020102100202020d0201020d0201020d020102020201020002010218020d0409020102020201040d0201020002010218020d0409020102020201040d0201020002010218060d060204090201020002010218060d0602040902010200020102040209040d0402040d02010400020102040209040d0402040d0201040002010218020d02090a01060002010218020d02090a01060002010218040202010e0002010218040202010e0002010204040202010e0002010204040202010c0003900a0a212f0008437962657241706506000e010a000e010800020106080814020106000201060808140201040002010408020e02080a140201020002010408020e02080a140201020002010208020e060808140201020002010208020e060808140201020002010a08061202140201020002010a08061202140201020002010a0808120201020002010a0808120201020002010208060104080212040e0201020002010208060104080212040e04010408020102200201040802120201022a04010408020102200201040802120201022a040104080601040806120401040806010408061206010e08041206010e0804120201020002010808020102080201020802120201020002010808020102080201020802120201020002011008021402010200020110080214020102000201100802120201020002011008021202010200020106080a01021202010200020106080a01021202010200020110080212020102000201100802120201020002011008020104000201100802010400020106080a010600020106080a0106000201060802010e000201060802010e000201060802010e000201060802010c0003900a0a212f000c4f6c6420536b656c65746f6e06000e010a000e010800020102100c0202010600020102100c020201040002010210020202000c020201020002010210020202000c02020102000201021002000e02020102000201021002000e02020102000201021010020201020002010210100202010200020102101002020102000201021010020201020002010210020204000602040002010200020102100202040006020400040102100402040006020400040102100402040006020400040102101202040102101202060102101002060102101002020102000201021010020201020002010210100202010200020102100e0202010400020102100e020201040002010210040202000202020002020200020202010200020102100402020002020200020202000202020102000201021006020200020202000402020102000201021006020200020202000402020102000201021010020201020002010210100202010200020102100e0202010400020102100e02020104000201021004020a0106000201021004020a01060002010210040202010e0002010210040202010e0002010210040202010e0002010210040202010c0004100a08232f000350696706010e000c010e00080104040e010404040104040e0104040401160404011604020102000201040402240c04020104000201040402240c04020104000201020402240e04020104000201020402240e040201040002011204020104000201120402010400020112040201040002011204020104000201120402010400020112040201020002010604020102030604020304010200020106040201020306040203040102000201140402010200020114040201020004010804061904040201020004010704081903040201040002010604021902010219020102190204020104000201060402190201021902010219020402010400020107040819030402010400020108040619040402010400020112040201040002011204020104000201080406010404020104000201080406010404020104000201120402010400020112040201040002011004020106000201100402010600020106040a010800020106040a0108000201060402011000020106040201100002010604020110000201060402010e00000000000000000d5072656461746f7220426c7565000000000000000e5072656461746f7220477265656e000000000000000c5072656461746f7220526564000000000000000b53616e746120436c617573000000000000000c536861646f77204e696e6a6103900a0a212f000a536c656e6465726d616e06000e010a000e01080002010e030201060002010e03020104000201120302010200020112030201020002011203020102000201120302010200020112030201020002011203020102000201120302010200020112030201020002011203020102000201120304011403040114030401140304011403060112030601120302010200020112030201020002011203020102000201120302010200020112030201020002011203020102000201120302010200020112030201020002011203020102000201120302010200020112030201020002011003020104000201100302010400020106030a010600020106030a0106000201060302010e000201060302010e000201060302010e000201060302010c0005f00408292f000954686520436c6f776e0a0004080a00040c140004080a00040c12000208020c0e01040c10000208020c0e01040c0e000208040c02130c06060c0c000208040c02130c06060c0a000208040c0213020602250c06060c08000208040c0213020602250c06060c08000208040c021302250e06060c08000208040c021302250e06060c04000408060c021310060a0c0408060c021310060a0c0208080c0213020602200806022002060a0c0208080c0213020602200806022002060a0c0200080c02130206042106060421080c0400080c02130206042106060421080c0600040c0213040602260227060602260227060c0800040c0213040602260227060602260227060c0a00020c0213040602200806022002060201020c0c00020c0213040602200806022002060201020c0c0004010213100602010e00040102131006020110000201021308060428040602011000020102130806042804060201100002010213021a0e060201100002010213021a0e0602011000020102130206021a0a06021a02011000020102130206021a0a06021a020110000201021304060a1a0206020110000201021304060a1a0206020110000201021310060201100002010213100602011000020102130e0602011200020102130e06020112000201021304060a0114000201021304060a01140002010213040602011c0002010213040602011c0002010213040602011c0002010213040602011400000000000000000954686520446576696c07300202292f000a5468652050697261746510000c011c000c011a0002010c110201180002010c1102011600020102110c0f021102011400020102110c0f02110201140002010211040f0615040f02110201120002010211030f0815030f02110201100002010211040f0215020f0215020f0215040f021102010e0002010211040f0215020f0215020f0215040f02110201080006010211040e020f0a15060f02110201060006010211040e020f0a15060f0211020104000201020f020e02010211060e020f0215020f02150a0f0211020102000201020f020e02010211060e020f0215020f02150a0f02110401020f020e020102111c0e0401020f020e02010211040e101b080e04010611060e101c060e0201020002010611040e021b1001061b0201020002010a0e021c0a1e0201041e061c04000201060e041b02010a1e0201041e060106000201040e041c0c01020a042902010a000201041b1001020a042902010c00041c02010216020a0801040a0201022b02010c0006010216020a0801040a0201022b0201100002010216040a04010a0a0201100002010216040a04010a0a0201100004010216100a0201100004010216100a0201120002010216080a0401040a0201120002010216080a0401040a0201120002010216100a0201120002010216100a0201120002010216100a0201120002010216100a0201120002010216060a0601040a0201120002010216060a0601040a0201120002010216100a0201120002010216100a02011200020102160e0a02011400020102160e0a0201140002010216040a0a01160002010216040a0a01160002010216040a02011e0002010216040a02011e0002010216040a02011e0002010216040a02011400000000000000000c54686520506f72747261697405280804252f00095468652057697463680a0006011800060116000201060b020114000201060b020112000201020b0809020110000201020b080902010e000201020002010a0b02010c000201020002010a0b0201100002010a0b0201100002010a0b02010e0002010e0902010c0002010e0902010a000201120b020108000201120b020108000201120b020108000201120b02010600020116090201040002011609020104001a0104001a010600021702050207041d0607041d02050800021702050207041d0607041d020508000217020502070222022306070222022302050800021702050207022202230607022202230205080002170205100702050800021702051007020508000217020510070205080002170205100702050800021702050807020106070205080002170205080702010607020508000217020510070205080002170205100702050800021702050607060104070205080002170205060706010407020508000217020502010c070201040506000217020502010c0702010405040002170405020102070201060702010605040002170405020102070201060702010605040002170405020104070601080504000217040502010407060108050400021704050201060702010c050200021704050201060702010c05021706050201060702010c05021706050201060702010c0504ac0a02232f000a5468652057697a617264080006011400060112000201060b020110000201060b02010e000201020b080902010c000201020b080902010a000201020002010a0b020108000201020002010a0b02010c0002010a0b02010c0002010a0b02010a0002010e090201080002010e09020106000201120b020104000201120b020104000201120b020104000201120b0201020002011609040116093601020002010407041d0607041d0201040002010407041d0607041d02010200020106070222022306070222022302010200020106070222022306070222022302010200020114070201020002011407020102000401120702010200040112070201040002010a07040104070201040002010a070401040702010400020104070e0502010400020104070e05020104000201021f1205020102000201021f12050401021f0805060106050401021f0805060106050401021f14050401021f14050401021f14050401021f14050401021f14050401021f14050401021f14050401021f14050401021f14050401021f14050201";
        

        bytes memory compressed = LibZip.flzCompress(inputData);


        // console.log("\n\n");
        console.log("Input length:", inputData.length, "\n");
        // console.logBytes(inputData);
        // console.log("\n\n");
        console.log("Compressed length:", compressed.length, "\n");
        console.logBytes(compressed);
        console.log("\n\n");

        assertTrue(compressed.length < inputData.length || inputData.length == 0);
    }
}

