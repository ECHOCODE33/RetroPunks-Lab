const { LibZip } = require('solady');

// Your hex string (e.g., a large calldata string)
const originalHex = '0x6956424f5277304b47676f414141414e535568455567414141444141414141774341514141414439437a454d414141424a456c45515652346e4f325850572f434d424347483774525953414373575869503354722f782f5957437431363951565a496d4b4c43424c446a4a70676a2f41737048794c6b376b574866506e652f736950704d6b4e3743506b655357484979344e495549716371504b577335315771484167534543677a4e7341667341522b416b676964354634446f483276756e46762f4f3849316e6c726f4e7162454a377658417331743776485254354341542f4434706c684946526773427a364447432b67475366446e6f50466344424b2b586731395430625a38716a6766676570352f4146386d38716541516667452f694b4a346a702f454535754b324233554266326749623034764b717750525333466a6e516b6e4d32727666535254377142526774727366523333726f7072792f41636639334a67556a64693837586d4d38475a6f3941577a534273464b746748667237365931373554516932524967467176714a644d454b4e38424d2b534a4c457131343169665766786f595462745a774d754a51385242644455792f35474a3576775141414141424a52553545726b4a6767673d3d'; 

const compressed = LibZip.flzCompress(originalHex);

console.log('\n\n', compressed);


// Function to get byte length of a hex string
const getByteLength = (hex) => {
    const temp = hex.startsWith('0x') ? hex.slice(2) : hex;
    return temp.length / 2;
};

const originalBytes = getByteLength(originalHex);
const compressedBytes = getByteLength(compressed);

console.log('\n');
console.log(`Original: ${originalBytes} bytes\n`);
console.log(`Compressed: ${compressedBytes} bytes\n`);
console.log(`Reduction: ${((1 - compressedBytes / originalBytes) * 100).toFixed(2)}%`);
console.log('\n');
